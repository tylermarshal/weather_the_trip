<% require 'google_maps_service' %>

<section class="trip-show-hero">
  <h1>Trip: <%= @trip.name %></h1>
</section>

<div class="show-block-container">
  <div class="show-block">
    <% if @trip.nil? %>
      <div class="route-container">
        <p>This trip has no destinations.</p>
      </div>
    <% else %>
      <div class="route-container">
        <% counter = 1 %>
        <% total_time = 0 %>
        <% @trip.destinations.each do |destination| %>
          <p><%= counter %>: <%= link_to "#{destination.city}, #{destination.state}", destination_path(destination) %></p>
          <p><%= link_to "Remove From Trip", destination_route_path(destination), method: :delete %></p>
          <% if counter != 1 %>
            <p>Travel Time to Destination: <%= @trip.directions(@trip.destinations[counter-2],destination) %></p><br>
          <% else %>
            <br>
          <% end %>
          <% counter += 1 %>
        <% end %>
      </div>
    <% end %>
    <h4><%= link_to "Add Destinations to Trip", edit_user_trip_path %></h3>
  </div>
</div>
